apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-kapt'
apply plugin: 'kotlin-android-extensions'

android {
  compileSdkVersion 27
  buildToolsVersion '27.0.3'

  defaultConfig {
    applicationId "pozzo.apps.travelweather"
    minSdkVersion 21
    targetSdkVersion 27
    versionCode 13
    versionName "1.1.0"
  }

  signingConfigs {
    release
  }

  allprojects {
    afterEvaluate { project ->
      def propsFile = rootProject.file("../../keystore/keystore.properties")
      def configName = 'release'

		def props = new Properties()
		props.load(new FileInputStream(propsFile))
		android.signingConfigs[configName].storeFile = file(props['storeFile'])
		android.signingConfigs[configName].storePassword = props['storePassword']
		android.signingConfigs[configName].keyAlias = props['keyAlias']
		android.signingConfigs[configName].keyPassword = props['keyPassword']
    }
  }

  buildTypes {
    release {
      debuggable false
      signingConfig signingConfigs.release
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
      project.ext.set('archivesBaseName', 'travelWeather-' + android.defaultConfig.versionName
      + '-' + android.defaultConfig.versionCode);
    }
    debug {
      debuggable true
      signingConfig signingConfigs.release
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
  }

  sourceSets {
    test.java.srcDirs += 'src/test/kotlin'
  }

  dataBinding {
    enabled = true
  }
}

dependencies {
  //Google
  implementation 'com.android.support:design:27.1.1'
  implementation "android.arch.lifecycle:runtime:1.1.1"
  implementation "android.arch.lifecycle:extensions:1.1.1"
  implementation 'com.google.firebase:firebase-core:15.0.2'
  implementation 'com.google.android.gms:play-services-maps:15.0.1'
  implementation 'com.google.android.gms:play-services-location:15.0.1'
  kapt "android.arch.lifecycle:compiler:1.1.1"
  //Web requests
  implementation 'com.squareup.retrofit2:retrofit:2.3.0'
  implementation 'com.squareup.retrofit2:converter-gson:2.3.0'
  //Mint
  implementation "com.splunk.mint:mint:5.0.0"
  //Pozzo
  implementation 'com.github.pozzoooo:pozzotools:-SNAPSHOT'
  //Kotlin
  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlinVersion"

  testImplementation 'junit:junit:4.12'
}

apply plugin: 'com.google.gms.google-services'
